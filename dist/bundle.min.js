(()=>{"use strict";for(var e=["A","A#","B","C","D","D#","E","F","F#","G","G#"],n=[],t=55,a=function(a){e.forEach((function(e,i){0==i&&a>0&&(t*=2);var u=.08333333333333333*i*t;n.push({f:t+u,n:e})}))},i=0;i<4;i++)a(i);var u=n;function l(e,n){var t=n.getContext("2d"),a=e.frequencyBinCount,i=new Uint8Array(a);t.clearRect(0,0,n.width,n.height);var l=function(){requestAnimationFrame(l),e.getByteFrequencyData(i),t.fillStyle="rgb(0, 0, 0)",t.fillRect(0,0,n.width,n.height);var r,c,o=n.width/a*2.5,d=n.height/255,f=(80,r={peaks:[],max:{index:null,value:null}},c={index:null,value:null},i.forEach((function(e,n){e>80?(null==c.value||e>c.value)&&(c={index:n,value:e}):e<80&&null!=c.index&&(r.peaks.push(c.index),c={index:null,value:null}),(null==r.max.value||e>r.max.value)&&(r.max={index:n,value:e})})),null!=c.index&&r.peaks.push(c.index),r);i.forEach((function(e,n){var a;t.fillStyle=(a=n,f.max.index==a?(function(e){var n,t,a=document.querySelector(".frequency"),i=document.querySelector(".note"),l=.732421875*(e+.5);a.textContent=l.toFixed(2)+" Hz",i.textContent=(n=u,t=l,n.reduce((function(e,n){return Math.abs(n.f-t)<Math.abs(e.f-t)?n:e}))).n}(a),"rgb(0, 255, 0)"):"rgb(100, 100, 100)");var i=(255-e)*d;t.fillRect(n*o,i,o+1,e*d)}))};l()}navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){var n=new AudioContext({sampleRate:3e3}),t=n.createMediaStreamSource(e);l(function(e,n){var t=e.createGain(),a=e.createAnalyser();return a.maxDecibels=0,a.minDecibels=-100,a.smoothingTimeConstant=.01,a.fftSize=4096,n.connect(t),t.connect(a),t.connect(e.destination),a}(n,t),document.querySelector(".visualizer"))}))})();
//# sourceMappingURL=bundle.min.js.map